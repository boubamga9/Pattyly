---
description: This file defines the full user flow for both clients and pastry chefs using the Micro-SaaS platform. It covers key interaction steps, including product browsing, personalized requests, checkout, onboarding, product management, and payment via Stripe. Use this file to guide implementation of page logic, routing, Stripe integration, and overall UX flow.
globs:
alwaysApply: false
---


# User Flow â€“ Client (guest user)

## ğŸ‚ Ordering an existing cake

1. The client visits the pastry chefâ€™s public page (`/[slug]`)
2. They browse the list of cakes and can filter by category (layer cakes, cupcakes, wedding cakes)
3. They select a cake and customize it
4. They fill in their personal information (contact, personalized message, pickup date)
5. They pay directly via Stripe Checkout
6. They are redirected to a confirmation page and receive a confirmation email

---

## âœï¸ Requesting a custom cake

1. The client visits the pastry chefâ€™s public page (`/[slug]`)
2. They click on the â€œCustom requestâ€ button
3. They fill out a custom questionnaire created by the pastry chef
4. They provide their personal information (contact, message, pickup date)
5. They are redirected to a reception confirmation page
6. They receive an email informing them their request is being processed

---

## ğŸ’³ Payment for custom cake orders

1. The client receives an email with a link to the order page (`/[slug]/orders/[orderId]`)
2. They can see:
   - The summary of their request
   - A message from the pastry chef
   - The price proposed by the pastry chef
   - Two buttons: â€œAccept and Payâ€ / â€œDeclineâ€
3. If they click â€œAccept and Payâ€:
   - They pay directly via Stripe
   - They are redirected to a confirmation page and receive a confirmation email
4. If they click â€œDeclineâ€:
   - A popup appears with an optional message field and a â€œDeclineâ€ button
   - They optionally fill the message and confirm
   - They are redirected to a confirmation page

---

# User Flow â€“ Pastry Chef (Dashboard)

1. Log in using email/password (Supabase Auth)

2. Onboarding (initial setup):
   - Shop name
   - Logo
   - Description / bio
   - Custom slug (`/my-name`)
   - Connect Stripe (Stripe Connect Express) â€” OAuth redirect and return

3. Add products (cakes):
   - Name, photo, price, description
   - Customizable options via a bespoke questionnaire

4. Receive orders:
   - Notification (email or dashboard)
   - View order details: product, customizations, client contact info
   - Respond to custom requests with message and price

5. Manage availability (disable specific days or time slots)

6. Edit products or shop information as needed
