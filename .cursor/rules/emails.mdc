---
description: This file defines all transactional emails sent by the pastry micro-SaaS. Emails are triggered on key user or client actions, and are localized, branded per shop, and sent via a transactional provider (Resend). This spec includes triggers, recipients, and payloads for each email type.
globs:
alwaysApply: false
---


## ðŸ“¬ Email Principles

- All emails use the shopâ€™s name and logo when available.
- Templates are fully branded (colors, logo) and localized.
- All emails are sent via a reliable transactional provider.
- Email sending is handled via server-side functions only (never client-side).

---

## âœ¨ Email Types

### 1. Custom Request Received

- **Trigger**: A client submits a custom cake request via `/[slug]/custom`
- **To**: Pastry chef
- **Payload**:
  - Client name & email
  - Requested date
  - Form responses
  - Link to dashboard quote page

---

### 2. Quote Sent

- **Trigger**: Pastry chef replies to a custom request with a quote
- **To**: Client
- **Payload**:
  - Summary of request
  - Proposed price
  - Chef's message
  - Payment link

---

### 3. Quote Refused

- **Trigger**: Pastry chef refuses a custom request
- **To**: Client
- **Payload**:
  - Optional message from chef
  - Suggestion to submit a new request

---

### 4. Payment Confirmed (Product or Quote)

- **Trigger**: Stripe payment success
- **To**: Client + Pastry chef
- **Payload**:
  - Product or request summary
  - Pickup date
  - Customization summary (if any)
  - Payment confirmation

---

### 5. Account Created

- **Trigger**: A new chef registers (optional flow)
- **To**: Pastry chef
- **Payload**:
  - Welcome message
  - Onboarding link

## ðŸ”’ Deliverability

- DKIM / SPF / DMARC configured
- All client emails stored securely
- Opt-in required if marketing is later added
